
<html layout:decorate="~{layout/layout.html}">

<head>
  <title>장바구니</title>
</head>

<body>
<main layout:fragment="main">
  <div class="container">
    <h1 class="t-text-[1.2rem] t-font-bold">장바구니</h1>
    <div class="t-mt-[10px] t-overflow-x-auto t-whitespace-nowrap">
      <div><a href="/prodoct/list">돌아가기</a></div>
      <table class="table table-hover">
        <thead>
        <tr>
          <th><input type="checkbox"></th>
          <th>이미지</th>
          <th>상품명</th>
          <th>가격</th>
          <th>구매/삭제</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="cart : ${cartList}">
          <td><input type="checkbox"></td>
          <td><img class="t-w-[50px] t-h-[50px] sm:t-w-[150px] sm:t-h-[150px] t-object-cover rounded"
                   width="100px" height="100px"  th:src="@{|/gen/${cart.product.thumbnailImg}|}" alt="상품이미지"></td>
          <td th:text="${cart.product.name}"></td>
          <td>
            <span th:text="@{|\ ${cart.product.price}|}"></span>
          </td>
          <td>
            <a href="" type="button">구매</a>
            <a href="#" type="button">삭제</a>
          </td>
        </tr>
        </tbody>
      </table>
      <a href="" type="button" >결제하기</a>

    </div>
  </div>
  <script src="https://js.tosspayments.com/v1"></script>
  <script th:inline="javascript">
    let tossPayments = TossPayments("test_ck_BX7zk2yd8yPdLKg2DnErx9POLqKQ"); // 테스트 클라이언트 키
    let path = "/";
    let successUrl = window.location.origin + path + "success";
    let failUrl = window.location.origin + path + "fail";
    let callbackUrl = window.location.origin + path + "va_callback";

    function pay(amount, orderName, cartId) {
        const method = "카드";
        const requestJson = {
            "amount": amount,
            "orderId": "sample-" + orderId,
            "orderName": orderName,
            "successUrl": successUrl,
            "failUrl": failUrl,
            "cardCompany": null,
            "cardInstallmentPlan": null,
            "maxCardInstallmentPlan": null,
            "useCardPoint": false,
            "customerName": "박토스",
            "customerEmail": null,
            "customerMobilePhone": null,
            "taxFreeAmount": null,
            "useInternationalCardOnly": false,
            "flowMode": "DEFAULT",
            "discountCode": null,
            "appScheme": null
        };
        tossPayments.requestPayment(method, requestJson);

        // 클릭한 버튼이 어떤 row에 해당하는지 식별하여 추가적인 처리 가능
        console.log("Clicked on Cart ID: " + cartId);
    }
</script>
</main>
</body>

</html>